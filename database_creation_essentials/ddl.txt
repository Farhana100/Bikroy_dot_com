CREATE TABLE PROJECT_BIKROY.USER_
(
	USER_ID NUMBER CONSTRAINT USER_PK PRIMARY KEY,
	NAME VARCHAR2(50) NOT NULL,
	PASSWORD VARCHAR2(20) NOT NULL,
	EMAIL_ADDR VARCHAR2(320) NOT NULL UNIQUE,
	LOCATION VARCHAR2(50),
	SUB_LOCATION VARCHAR2(50),
	POST_COUNT NUMBER NOT NULL
);

CREATE TABLE PROJECT_BIKROY.ADMIN
(
	ADMIN_ID NUMBER CONSTRAINT ADMIN_PK PRIMARY KEY,
	DESIGNATION VARCHAR2(50) NOT NULL,
	CONSTRAINT ADMIN_FK FOREIGN KEY(ADMIN_ID) REFERENCES USER_(USER_ID)
);

CREATE TABLE PROJECT_BIKROY.MEMBER
(
	MEMBER_ID NUMBER CONSTRAINT MEMBER_PK PRIMARY KEY,
	CONSTRAINT MEMBER_FK FOREIGN KEY(MEMBER_ID) REFERENCES USER_(USER_ID),
	MEMBERSHIP_TYPE VARCHAR2(20) NOT NULL,
	MEMBERSHIP_DATE DATE NOT NULL,
	DURATION NUMBER NOT NULL,
	PAYMENT_SATUS CHAR(1) NOT NULL
);

CREATE TABLE PROJECT_BIKROY.MESSAGE
(
	MESSAGE_ID NUMBER CONSTRAINT MESSAGE_PK PRIMARY KEY,
	TEXT VARCHAR2(500) NOT NULL,
	TIME DATE NOT NULL,
	SENDER_ID NUMBER NOT NULL,
	CONSTRAINT SENDER_FK FOREIGN KEY(SENDER_ID) REFERENCES USER_(USER_ID),
	RECIEVER_ID NUMBER NOT NULL,
	CONSTRAINT RECIEVER_FK FOREIGN KEY(RECIEVER_ID) REFERENCES USER_(USER_ID)
);

CREATE TABLE PROJECT_BIKROY.PRODUCT_AD
(
	PRODUCT_AD_ID NUMBER CONSTRAINT PRODUCT_AD_PK PRIMARY KEY,
	TITLE VARCHAR2(100) NOT NULL,
	DESCRIPTION VARCHAR2(500),
	TIME_OF_POST DATE NOT NULL,
	PRICE NUMBER NOT NULL,
	NEGOTIABLE CHAR(1) NOT NULL,
	CONDITION CHAR(20),
	CATEGORY VARCHAR2(100) NOT NULL,
	SUB_CATEGORY VARCHAR2(100) NOT NULL,
	APPROVER_ID NUMBER NOT NULL,
	CONSTRAINT APPROVER_FK FOREIGN KEY(APPROVER_ID) REFERENCES ADMIN(ADMIN_ID),
	POSTER_ID NUMBER NOT NULL,
	CONSTRAINT POSTER_FK FOREIGN KEY(POSTER_ID) REFERENCES USER_(USER_ID)
);

CREATE TABLE PROJECT_BIKROY.PROD_PHONE_NUM
(
	PROD_PHONE_ID NUMBER NOT NULL,
	CONSTRAINT PHONE_NUM_FK FOREIGN KEY(PROD_PHONE_ID) REFERENCES PRODUCT_AD(PRODUCT_AD_ID),
	PHONE_NUM NUMBER NOT NULL,
	PRIMARY KEY(PROD_PHONE_ID, PHONE_NUM)
);

CREATE TABLE PROJECT_BIKROY.PROD_IMAGE
(
	PROD_IMAGE_ID NUMBER NOT NULL,
	CONSTRAINT IMAGE_FK FOREIGN KEY(PROD_IMAGE_ID) REFERENCES PRODUCT_AD(PRODUCT_AD_ID),
	IMAGE VARCHAR2(500) NOT NULL,
	PRIMARY KEY(PROD_IMAGE_ID, IMAGE)
);

CREATE TABLE PROJECT_BIKROY.PROD_AD_TYPE
(
	PROD_TYPE_ID NUMBER NOT NULL,
	CONSTRAINT AD_TYPE_FK FOREIGN KEY(PROD_TYPE_ID) REFERENCES PRODUCT_AD(PRODUCT_AD_ID),
	AD_TYPE VARCHAR2(20),
	PRIMARY KEY(PROD_TYPE_ID, AD_TYPE)
);

CREATE TABLE PROJECT_BIKROY.REPORT
(
	REPORT_ID NUMBER CONSTRAINT REPORT_PK PRIMARY KEY,
	REASON VARCHAR2(50) NOT NULL,
	EMAIL_ADDR VARCHAR2(320) NOT NULL UNIQUE,
	REPORT_MESSAGE VARCHAR2(50) NOT NULL,
	REPORTED_AD_ID NUMBER NOT NULL,
	CONSTRAINT REPORT_FK FOREIGN KEY(REPORTED_AD_ID) REFERENCES PRODUCT_AD(PRODUCT_AD_ID)
);

CREATE TABLE PROJECT_BIKROY.FAVOURITE
(
	FAV_AD_ID NUMBER NOT NULL,
	CONSTRAINT FAV_AD_FK FOREIGN KEY(FAV_AD_ID) REFERENCES PRODUCT_AD(PRODUCT_AD_ID),
	FAV_USER_ID NUMBER NOT NULL,
	CONSTRAINT FAV_USER_FK FOREIGN KEY(FAV_USER_ID) REFERENCES USER_(USER_ID),
	PRIMARY KEY(FAV_AD_ID, FAV_USER_ID)
);

-- DROP TABLE PROJECT_BIKROY.FAVOURITE;
-- DROP TABLE PROJECT_BIKROY.REPORT;
-- DROP TABLE PROJECT_BIKROY.PROD_AD_TYPE;
-- DROP TABLE PROJECT_BIKROY.PROD_IMAGE;
-- DROP TABLE PROJECT_BIKROY.PROD_PHONE_NUM;
-- DROP TABLE PROJECT_BIKROY.PRODUCT_AD;
-- DROP TABLE PROJECT_BIKROY.MESSAGE;
-- DROP TABLE PROJECT_BIKROY.MEMBER;
-- DROP TABLE PROJECT_BIKROY.ADMIN;
-- DROP TABLE PROJECT_BIKROY.USER_;